using System.Collections.Generic;
using HtmlAgilityPack;
using System;

public class Crawler

{

    static void Main()

    {

        var Links = new List<string>
            {
                "https://www.takeaway.com/ro/friends-food-and-garden",
                "https://www.takeaway.com/ro/moara-de-foc",
                "https://glovoapp.com/en/ias/store/carbon-iasi/",
                "https://glovoapp.com/en/ias/store/greek-taverna-souflaki-/",
                "https://glovoapp.com/en/ias/store/restaurant-arnia-/",
                "https://www.takeaway.com/ro/club-20-bamboo",
                "https://www.takeaway.com/ro/pizzeria-goldoni",
                "https://www.takeaway.com/ro/sushi-master-iasi",

            };


        foreach (var link in Links)
        {
            var web = new HtmlWeb();
            var doc = web.Load(link);
            /*     foreach (HtmlNode div in doc.DocumentNode.SelectNodes("//span[contains(@class, 'meal-name')]"))
                 {
                     Console.WriteLine(div.InnerText);
                 };*/
            if (link.Contains(".takeaway.")) {
                foreach (HtmlNode division in doc.DocumentNode.SelectNodes("//div[contains(@class, 'meal__description-texts js-meal-description-text')]"))
                {

                    Console.WriteLine(link.ToUpper());
                    /*Console.WriteLine(division.InnerText);*/
                    var trimmedText = division.InnerText.Trim();

                    string[] array = trimmedText.Split("\r\n".ToCharArray(), StringSplitOptions.RemoveEmptyEntries);

                    var name = array[0];
                    var descriere = array[1];
                    var pret = array[2];

                    Console.WriteLine(name, "<--- NUMELE");
                    Console.WriteLine(descriere, "<----- DESCRIERE");
                    Console.WriteLine(pret, "<----- PRET");
                }

            } else
            {
                foreach (HtmlNode division in doc.DocumentNode.SelectNodes("//div[contains(@class, 'card-content')]"))
                {
                    Console.WriteLine(link.ToUpper());
                    var HtmlDom = division.InnerHtml;
                    HtmlDocument html = new HtmlDocument();

                    html.LoadHtml(HtmlDom);

                    HtmlNode a = html.DocumentNode.SelectSingleNode("//div[contains(@class, 'description')]");
                    HtmlNode b = html.DocumentNode.SelectSingleNode("//h4[contains(@class, 'title')]");
                    HtmlNode c = html.DocumentNode.SelectSingleNode("//div[contains(@class, 'price')]");
                    //Descriere
                    if(a != null)
                    {
                        Console.WriteLine(a.InnerText);
                    }

                    if (b != null )
                    {
                        Console.WriteLine(b.InnerText);
                    }

                    if (c != null)
                    {
                        Console.WriteLine(c.InnerText);
                    }

                    //Titlu
                    /*Console.WriteLine(b.InnerText);
                    //Pret
                    Console.WriteLine(c.InnerText);*/
                }

            }
            

            /*    foreach (HtmlNode division in doc.DocumentNode.SelectNodes("//div[contains(@class, 'meal__description-additional-info')]"))
                {
                    Console.WriteLine(division.InnerText);
                }*/

        }

        /*        string text = node.InnerText;*/
        /*Console.WriteLine(text);*/


    }

}
